{% extends "base.html" %}
{% block title %}Dashboard{% endblock %}
{% block content %}
<div class="d-flex">
  <div style="width: 300px; height: calc(100vh - 56px); background: white; overflow-y: hidden; z-index: 1000;">
    <h5 class="fw-bold m-3">Filter Data</h5>
    <hr class="my-2">
    <form method="POST" action="/dashboard">
      <div class="d-flex flex-column">
        <div class="fw-bold small">Like</div>
        <div class="d-flex gap-2 small align-items-center">
          <div class="small">Min :</div>
          <div class="flex-grow-1">
            <input class="form-control form-control-sm" name="min_like" type="number" step="1"
                value="{{ filters.min_like }}" min=0>
          </div>
        </div>
      </div>
      <hr class="my-2">
      <div class="d-flex flex-column">
        <div class="fw-bold small">Dislike</div>
        <div class="d-flex gap-2 small align-items-center">
          <div class="small">Max :</div>
          <div class="flex-grow-1">
            <input class="form-control form-control-sm" name="max_dislike" type="number" step="1"
                value="{{ filters.max_dislike }}" min=0>
          </div>
        </div>
      </div>
      <hr class="my-2">
      <div class="d-flex flex-column">
        <div class="fw-bold small">Position</div>
        <div class="d-flex gap-2 small align-items-center">
          <div class="small">Lat :</div>
          <div class="flex-grow-1">
            <input class="form-control form-control-sm" name="latitude" type="number" step="any"
                value="{{ filters.latitude }}" min="{{ ranges.min_latitude }}" max="{{ ranges.max_latitude }}">
          </div>
        </div>
        <div class="d-flex gap-2 small align-items-center">
          <div class="small">Lon :</div>
          <div class="flex-grow-1">
            <input class="form-control form-control-sm" name="longitude" type="number" step="any"
                value="{{ filters.longitude }}" min="{{ ranges.min_longitude }}" max="{{ ranges.max_longitude }}">
          </div>
        </div>
        <div class="d-flex gap-2 small align-items-center">
          <div class="small">Max Distance (Km) :</div>
          <div class="flex-grow-1">
            <input class="form-control form-control-sm" name="max_distance" type="number" step="any"
                value="{{ filters.max_distance }}" min=0>
          </div>
        </div>
      </div>
      <hr class="my-2">
      <div class="d-flex flex-column">
        <div class="fw-bold small">Select Category</div>
        <select class="form-select form-select-sm" name="category">
          <option value="" {% if not filters.category %}selected{% endif %}>-- All Categories --</option>
          {% for cat in categories %}
            <option value="{{ cat.id }}" {% if cat.id == filters.category %}selected{% endif %}>{{ cat.name }}</option>
          {% endfor %}
        </select>
      </div>
      <hr class="my-2">
      <button class="btn btn-primary w-100 btn-sm small mt-2 fw-bold" type="submit">Apply Filter</button>
      <a href="/dashboard" class="btn btn-secondary w-100 mt-2 btn-sm small fw-bold">Reset</a>
    </form>
  </div>
  
  <div style="height: calc(100vh - 56px); flex-grow:1; overflow:hidden;">
    <iframe src="{{ url_for('static', filename='dashboard.html') }}" 
            style="border:none; width:100%; height:100%;">
    </iframe>
  </div>
</div>
{% endblock %}
