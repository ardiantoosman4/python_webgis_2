{% extends "base.html" %}
{% block title %}Dashboard{% endblock %}
{% block content %}
<ul class="nav nav-tabs">
  <li class="nav-item">
    <a class="nav-link active" 
       href="{{ url_for('cms.my_posts_page') }}">
       My Posts
    </a>
  </li>
  <li class="nav-item">
    <a class="nav-link" 
       href="{{ url_for('cms.other_posts_page') }}">
       Other Posts
    </a>
  </li>
</ul>

<!-- Header with Create button -->
<div class="d-flex justify-content-between align-items-center mb-4">
  <h2 class="text-light mb-0">📌 My Posts</h2>
  <a href="{{ url_for('cms.create_post') }}" class="btn btn-success fw-semibold shadow-sm">
    ➕ Create New Post
  </a>
</div>

<!-- Posts Grid -->
<div class="row row-cols-1 row-cols-md-2 row-cols-lg-3 g-4">
  {% for post in my_posts %}
    <div class="col">
      <div class="card h-100 bg-dark text-light border-0 shadow-lg rounded-3 overflow-hidden">
        
        <!-- Image -->
        <img src="{{ post.photo }}" class="card-img-top" alt="Post image" style="height:200px; object-fit:cover;">

        <!-- Card Content -->
        <div class="card-body d-flex flex-column bg-light">
          <h6 class="card-subtitle mb-2">
            <span class="badge bg-info text-dark px-2 py-1">{{ post.category }}</span>
          </h6>
          <h5 class="card-title fw-bold text-dark">{{ post.name }}</h5>
          <p class="card-text text-dark small">{{ post.description }}</p>
        </div>

        <!-- Card Footer -->
        <div class="card-footer bg-light border-0 d-flex justify-content-end gap-2">
          <form 
            action="{{ url_for('cms.delete_post', post_id=post.id) }}" 
            method="post" class="d-inline m-0 p-0" 
            style="border:none; box-shadow:none; padding:0; display:inline; min-width:0px;"
          >
            <button type="submit" class="btn btn-danger btn-sm fw-semibold px-3 shadow-sm">
              🗑 Delete
            </button>
          </form>
          <a href="{{ url_for('cms.edit_post', post_id=post.id) }}" 
             class="btn btn-primary btn-sm fw-semibold px-3 shadow-sm">
            ✏️ Edit
          </a>
        </div>
      </div>
    </div>
  {% else %}
    <p class="text-muted">No posts yet. Create your first one!</p>
  {% endfor %}
</div>

{% endblock %}
